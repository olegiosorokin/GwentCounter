<!DOCTYPE html>
<html>
<head>
    <title>Gwent Mobile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background: #1a1a2e;
            color: white;
            min-height: 100vh;
            padding: 8px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .header {
            background: linear-gradient(145deg, #16213e, #1a1a3a);
            border-radius: 20px;
            padding: 12px;
            border: 2px solid #e94560;
        }

        .total-score {
            font-size: 48px;
            font-weight: bold;
            color: #0ff;
            text-align: center;
            text-shadow: 0 0 15px #0ff;
            line-height: 1.1;
        }

        .weather-row {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 6px 0;
            flex-wrap: wrap;
        }

        .weather-badge {
            background: #0f3460;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .round-info {
            display: flex;
            justify-content: center;
            gap: 15px;
            font-size: 14px;
            color: #888;
        }

        /* –ü–∞–Ω–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è - —Ç–µ–ø–µ—Ä—å –°–í–ï–†–•–£ */
        .add-panel {
            background: linear-gradient(145deg, #16213e, #1a1a3a);
            border-radius: 20px;
            padding: 12px;
            border: 2px solid #e94560;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .add-row {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .power-select {
            background: #0f3460;
            border: 2px solid #533483;
            border-radius: 25px;
            padding: 10px 15px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            width: 80px;
            text-align: center;
            -webkit-appearance: none;
        }

        .row-select {
            background: #0f3460;
            border: 2px solid #533483;
            border-radius: 25px;
            padding: 10px 15px;
            color: white;
            font-size: 16px;
            flex: 1;
            -webkit-appearance: none;
        }

        .ability-buttons {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .ability-btn {
            background: #0f3460;
            border: 2px solid #533483;
            border-radius: 25px;
            padding: 8px 12px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            transition: all 0.1s;
            color: white;
            flex: 1;
            min-width: 70px;
            justify-content: center;
        }

        .ability-btn.active {
            background: #e94560;
            border-color: #ff6b6b;
        }

        .ability-btn.hero.active { background: gold; color: #1a1a2e; }
        .ability-btn.morale.active { background: #ff6b6b; }
        .ability-btn.horn.active { background: #ffd700; color: #1a1a2e; }
        .ability-btn.friend.active { background: #9b59b6; }

        .add-btn {
            background: #4CAF50;
            border: none;
            border-radius: 25px;
            padding: 12px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 3px 0 #2d6a31;
            width: 100%;
        }

        .add-btn:active {
            transform: translateY(3px);
            box-shadow: none;
        }

        /* –†—è–¥—ã */
        .rows-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .row-card {
            background: linear-gradient(145deg, #16213e, #1f1a3a);
            border-radius: 16px;
            padding: 10px;
            border: 2px solid #533483;
        }

        .row-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #0f3460;
            padding: 8px 12px;
            border-radius: 12px;
            margin-bottom: 8px;
        }

        .row-title {
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .row-total {
            font-size: 20px;
            font-weight: bold;
            color: #0ff;
        }

        /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        .cards-container {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .card-item {
            background: #0f3460;
            border-radius: 12px;
            padding: 8px 10px;
            border: 2px solid #533483;
            cursor: pointer;
        }

        .card-item.hero {
            border-color: gold;
            background: linear-gradient(145deg, #2a1b3d, #2a1a4a);
        }

        .card-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-power {
            font-size: 18px;
            font-weight: bold;
            color: #0ff;
            min-width: 35px;
        }

        .card-name {
            font-size: 15px;
        }

        .card-badges {
            display: flex;
            gap: 4px;
        }

        .mini-badge {
            width: 24px;
            height: 24px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            background: #1f4a7a;
        }

        .card-details {
            display: none;
            margin-top: 8px;
            padding: 8px;
            background: #0a1a2a;
            border-radius: 8px;
            font-size: 13px;
            border: 1px solid #533483;
        }

        .card-item.expanded .card-details {
            display: block;
        }

        .calc-line {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: wrap;
            color: #aaa;
        }

        .calc-line.final {
            color: #0ff;
            font-weight: bold;
            margin-top: 5px;
        }

        .remove-btn {
            background: #f44336;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 0 #aa2e25;
        }

        .remove-btn:active {
            transform: translateY(2px);
            box-shadow: none;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç—ã —Ä—è–¥–∞ */
        .row-effects {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }

        .effect-btn {
            background: #0f3460;
            border: 2px solid #533483;
            border-radius: 20px;
            padding: 8px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            flex: 1;
            justify-content: center;
        }

        .effect-btn.active {
            background: #e94560;
        }

        .effect-btn.horn.active {
            background: #ffd700;
            color: #1a1a2e;
        }

        .effect-btn.weather.active {
            background: #87CEEB;
            color: #1a1a2e;
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .action-btn {
            padding: 12px;
            border-radius: 25px;
            border: none;
            font-size: 16px;
            font-weight: bold;
            color: white;
            box-shadow: 0 3px 0 rgba(0,0,0,0.3);
            cursor: pointer;
        }

        .action-btn:active {
            transform: translateY(3px);
            box-shadow: none;
        }

        .action-btn.end { background: #4CAF50; }
        .action-btn.reset { background: #f44336; }

        /* –ò—Å—Ç–æ—Ä–∏—è */
        .history-panel {
            background: #16213e;
            border-radius: 16px;
            padding: 10px;
            border: 2px solid #533483;
        }

        .history-title {
            font-size: 14px;
            color: #888;
            margin-bottom: 5px;
        }

        .history-list {
            max-height: 80px;
            overflow-y: auto;
            font-size: 12px;
        }

        .history-item {
            padding: 4px 0;
            border-bottom: 1px solid #533483;
            color: #ccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div class="header">
            <div class="total-score" id="totalScore">0</div>
            <div class="weather-row" id="weatherRow"></div>
            <div class="round-info">
                <span>–†–∞—É–Ω–¥ <span id="roundDisplay">1</span></span>
                <span>–ö–∞—Ä—Ç: <span id="cardsCountDisplay">0</span></span>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è - –°–í–ï–†–•–£ -->
        <div class="add-panel">
            <div class="add-row">
                <select class="power-select" id="cardPower">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5" selected>5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                </select>

                <select class="row-select" id="cardRow">
                    <option value="melee">‚öîÔ∏è –ë–ª–∏–∂–Ω–∏–π</option>
                    <option value="ranged">üèπ –î–∞–ª—å–Ω–∏–π</option>
                    <option value="siege">üè∞ –û—Å–∞–¥–Ω—ã–π</option>
                </select>
            </div>

            <div class="ability-buttons">
                <button class="ability-btn hero" id="btnHero" onclick="toggleAbility('hero')">üëë –ì–µ—Ä–æ–π</button>
                <button class="ability-btn morale" id="btnMorale" onclick="toggleAbility('morale')">‚≠ê –ú–æ—Ä–∞–ª—å</button>
                <button class="ability-btn horn" id="btnHorn" onclick="toggleAbility('horn')">üìØ –†–æ–≥</button>
                <button class="ability-btn friend" id="btnFriend" onclick="toggleAbility('friend')">ü§ù –î—Ä—É–∑—å—è</button>
            </div>

            <button class="add-btn" onclick="addCard()">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
        </div>

        <!-- –†—è–¥—ã -->
        <div class="rows-container" id="rowsContainer"></div>

        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="action-buttons">
            <button class="action-btn end" onclick="endRound()">üèÅ –†–∞—É–Ω–¥</button>
            <button class="action-btn reset" onclick="resetGame()">üîÑ –ù–æ–≤–∞—è</button>
        </div>

        <!-- –ò—Å—Ç–æ—Ä–∏—è -->
        <div class="history-panel">
            <div class="history-title">üìã –ò—Å—Ç–æ—Ä–∏—è</div>
            <div class="history-list" id="historyList"></div>
        </div>
    </div>

    <script>
        class GwentMobileCounter {
            constructor() {
                this.round = 1;
                this.cards = { melee: [], ranged: [], siege: [] };
                this.horn = { melee: false, ranged: false, siege: false };
                this.weather = { melee: false, ranged: false, siege: false };
                this.history = [];

                // –î–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
                this.selectedAbilities = {
                    hero: false,
                    morale: false,
                    horn: false,
                    friend: false
                };
            }

            toggleAbility(type) {
                this.selectedAbilities[type] = !this.selectedAbilities[type];

                // –ì–µ—Ä–æ–π –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
                if (type === 'hero' && this.selectedAbilities.hero) {
                    this.selectedAbilities.morale = false;
                    this.selectedAbilities.horn = false;
                    this.selectedAbilities.friend = false;
                }

                // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–¥ –∫–Ω–æ–ø–æ–∫
                document.getElementById('btnHero').classList.toggle('active', this.selectedAbilities.hero);
                document.getElementById('btnMorale').classList.toggle('active', this.selectedAbilities.morale);
                document.getElementById('btnHorn').classList.toggle('active', this.selectedAbilities.horn);
                document.getElementById('btnFriend').classList.toggle('active', this.selectedAbilities.friend);
            }

            addCard() {
                const power = parseInt(document.getElementById('cardPower').value);
                const row = document.getElementById('cardRow').value;

                const card = {
                    id: Date.now(),
                    power: power,
                    isHero: this.selectedAbilities.hero,
                    hasMorale: this.selectedAbilities.morale,
                    hasHorn: this.selectedAbilities.horn,
                    isFriend: this.selectedAbilities.friend,
                    name: this.generateName()
                };

                this.cards[row].push(card);

                let desc = `${card.name} (${power})`;
                if (card.isHero) desc += ' üëë';
                if (card.hasMorale) desc += ' ‚≠ê';
                if (card.hasHorn) desc += ' üìØ';
                if (card.isFriend) desc += ' ü§ù';

                this.addToHistory(`‚ûï ${desc}`);

                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
                this.selectedAbilities = { hero: false, morale: false, horn: false, friend: false };
                ['btnHero', 'btnMorale', 'btnHorn', 'btnFriend'].forEach(id => {
                    document.getElementById(id).classList.remove('active');
                });

                this.updateDisplay();
            }

            generateName() {
                const heroes = ['–ì–µ—Ä–∞–ª—å—Ç', '–ô–µ–Ω–Ω–∏—Ñ—ç—Ä', '–¢—Ä–∏—Å—Å', '–í–µ—Å–ø–∏—Ä–∞', '–ó–æ–ª—Ç–∞–Ω'];
                const commanders = ['–ö–æ–º–∞–Ω–¥–∏—Ä', '–ì–µ–Ω–µ—Ä–∞–ª', '–ú–∞—Ä—à–∞–ª', '–ö–∞–ø–∏—Ç–∞–Ω'];
                const bards = ['–ë–∞—Ä–¥', '–õ—é—Ç–∏–∫', '–ü–æ—ç—Ç', '–ú–µ–Ω–µ—Å—Ç—Ä–µ–ª—å'];
                const soldiers = ['–í–æ–∏–Ω', '–°—Ç—Ä–µ–ª–æ–∫', '–†—ã—Ü–∞—Ä—å', '–õ—É—á–Ω–∏–∫', '–ö–æ–ø–µ–π—â–∏–∫'];
                const friends = ['–ö–∞—Ç–∞–ø—É–ª—å—Ç–∞', '–ë–∞–ª–ª–∏—Å—Ç–∞', '–¢–∞—Ä–∞–Ω', '–©–∏—Ç–æ–Ω–æ—Å–µ—Ü'];

                if (this.selectedAbilities.hero) return heroes[Math.floor(Math.random() * heroes.length)];
                if (this.selectedAbilities.morale) return commanders[Math.floor(Math.random() * commanders.length)];
                if (this.selectedAbilities.horn) return bards[Math.floor(Math.random() * bards.length)];
                if (this.selectedAbilities.friend) return friends[Math.floor(Math.random() * friends.length)];
                return soldiers[Math.floor(Math.random() * soldiers.length)];
            }

            removeCard(row, id) {
                const index = this.cards[row].findIndex(c => c.id === id);
                if (index !== -1) {
                    const card = this.cards[row][index];
                    this.cards[row].splice(index, 1);
                    this.addToHistory(`‚ùå ${card.name}`);
                    this.updateDisplay();
                }
            }

            toggleCardDetails(id) {
                const element = document.getElementById(`card-${id}`);
                if (element) {
                    element.classList.toggle('expanded');
                }
            }

            toggleHorn(row) {
                this.horn[row] = !this.horn[row];
                this.updateDisplay();
            }

            toggleWeather(row) {
                this.weather[row] = !this.weather[row];
                this.updateDisplay();
            }

            calculateCardPower(card, rowCards, rowHasHorn, rowHasWeather) {
                if (card.isHero) {
                    return { final: card.power, steps: ['üëë –ì–µ—Ä–æ–π: ' + card.power] };
                }

                let currentPower = card.power;
                let steps = [];

                // 1. –ü–æ–≥–æ–¥–∞
                if (rowHasWeather) {
                    currentPower = 1;
                    steps.push('üåßÔ∏è –ü–æ–≥–æ–¥–∞: 1');
                }

                // 2. –ú–æ—Ä–∞–ª—å
                const moraleCount = rowCards.filter(c => c.hasMorale && !c.isHero && c.id !== card.id).length;
                if (moraleCount > 0) {
                    currentPower += moraleCount;
                    steps.push(`‚≠ê –ú–æ—Ä–∞–ª—å +${moraleCount}: ${currentPower}`);
                }

                // 3. –î—Ä—É–∑—å—è
                if (card.isFriend) {
                    const friendCount = rowCards.filter(c => c.isFriend && !c.isHero).length;
                    if (friendCount > 1) {
                        currentPower = currentPower * friendCount;
                        steps.push(`ü§ù –î—Ä—É–∑—å—è x${friendCount}: ${currentPower}`);
                    }
                }

                // 4. –†–æ–≥
                const hasHornEffect = rowHasHorn;
                const hasCardHorn = card.hasHorn;

                if (hasHornEffect) {
                    currentPower = currentPower * 2;
                    steps.push(`üìØ –û–±—â–∏–π —Ä–æ–≥ √ó2: ${currentPower}`);
                } else if (hasCardHorn) {
                    steps.push(`üìØ –°–≤–æ–π —Ä–æ–≥ (–∂–¥—ë—Ç)`);
                }

                return { final: currentPower, steps: steps };
            }

            calculateRow(row) {
                const rowCards = this.cards[row];
                if (rowCards.length === 0) return { total: 0, cards: [] };

                const rowHasHorn = this.horn[row];
                const rowHasWeather = this.weather[row];
                const hasCardHorn = rowCards.some(c => c.hasHorn && !c.isHero);
                const results = [];

                rowCards.forEach(card => {
                    const calc = this.calculateCardPower(card, rowCards, rowHasHorn, rowHasWeather);

                    if (hasCardHorn && !rowHasHorn && !card.hasHorn && !card.isHero) {
                        calc.final = calc.final * 2;
                        calc.steps.push(`üìØ –ë–∞—Ä–¥ —É–¥–≤–∞–∏–≤–∞–µ—Ç: ${calc.final}`);
                    }

                    results.push({
                        ...card,
                        finalPower: calc.final,
                        steps: calc.steps
                    });
                });

                return {
                    total: results.reduce((sum, card) => sum + card.finalPower, 0),
                    cards: results
                };
            }

            calculateTotal() {
                return this.calculateRow('melee').total +
                       this.calculateRow('ranged').total +
                       this.calculateRow('siege').total;
            }

            updateDisplay() {
                const rows = ['melee', 'ranged', 'siege'];
                const rowNames = { melee: '‚öîÔ∏è –ë–ª–∏–∂–Ω–∏–π', ranged: 'üèπ –î–∞–ª—å–Ω–∏–π', siege: 'üè∞ –û—Å–∞–¥–Ω—ã–π' };
                const weatherIcons = { melee: '‚ùÑÔ∏è', ranged: 'üå´Ô∏è', siege: 'üåßÔ∏è' };

                const container = document.getElementById('rowsContainer');
                container.innerHTML = '';

                rows.forEach(row => {
                    const rowData = this.calculateRow(row);

                    let rowHtml = `
                        <div class="row-card">
                            <div class="row-header">
                                <span class="row-title">${rowNames[row]}</span>
                                <span class="row-total">${rowData.total}</span>
                            </div>

                            <div class="cards-container">
                    `;

                    rowData.cards.forEach(card => {
                        const badges = [];
                        if (card.isHero) badges.push('<span class="mini-badge">üëë</span>');
                        if (card.hasMorale) badges.push('<span class="mini-badge">‚≠ê</span>');
                        if (card.hasHorn) badges.push('<span class="mini-badge">üìØ</span>');
                        if (card.isFriend) badges.push('<span class="mini-badge">ü§ù</span>');

                        rowHtml += `
                            <div class="card-item ${card.isHero ? 'hero' : ''}" id="card-${card.id}" onclick="toggleCardDetails(${card.id})">
                                <div class="card-main">
                                    <div class="card-left">
                                        <span class="card-power">${card.finalPower}</span>
                                        <span class="card-name">${card.name}</span>
                                        <div class="card-badges">${badges.join('')}</div>
                                    </div>
                                    <div class="remove-btn" onclick="event.stopPropagation(); removeCard('${row}', ${card.id})">‚úñ</div>
                                </div>
                                <div class="card-details">
                                    <div class="calc-line">
                                        ${card.steps.map(step => `<span>${step}</span>`).join(' ‚Üí ')}
                                    </div>
                                    <div class="calc-line final">= ${card.finalPower}</div>
                                </div>
                            </div>
                        `;
                    });

                    rowHtml += `
                            </div>

                            <div class="row-effects">
                                <button class="effect-btn ${this.horn[row] ? 'active horn' : ''}"
                                        onclick="toggleHorn('${row}')">
                                    üìØ –†–æ–≥
                                </button>
                                <button class="effect-btn ${this.weather[row] ? 'active weather' : ''}"
                                        onclick="toggleWeather('${row}')">
                                    ${weatherIcons[row]} ${this.weather[row] ? '‚úì' : ''}
                                </button>
                            </div>
                        </div>
                    `;

                    container.innerHTML += rowHtml;
                });

                // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π —Å—á–µ—Ç
                document.getElementById('totalScore').textContent = this.calculateTotal();

                // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–≥–æ–¥—É
                this.updateWeatherDisplay();

                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
                const totalCards = this.cards.melee.length + this.cards.ranged.length + this.cards.siege.length;
                document.getElementById('roundDisplay').textContent = this.round;
                document.getElementById('cardsCountDisplay').textContent = totalCards;
            }

            updateWeatherDisplay() {
                const weatherRow = document.getElementById('weatherRow');
                const weatherIcons = { melee: '‚ùÑÔ∏è', ranged: 'üå´Ô∏è', siege: 'üåßÔ∏è' };
                const weatherNames = { melee: '–ú–æ—Ä–æ–∑', ranged: '–¢—É–º–∞–Ω', siege: '–î–æ–∂–¥—å' };

                let active = [];
                if (this.weather.melee) active.push(`<span class="weather-badge">‚ùÑÔ∏è –ú–æ—Ä–æ–∑</span>`);
                if (this.weather.ranged) active.push(`<span class="weather-badge">üå´Ô∏è –¢—É–º–∞–Ω</span>`);
                if (this.weather.siege) active.push(`<span class="weather-badge">üåßÔ∏è –î–æ–∂–¥—å</span>`);

                weatherRow.innerHTML = active.length ? active.join('') : '<span style="color:#888;">‚òÄÔ∏è –Ø—Å–Ω–æ</span>';
            }

            endRound() {
                this.addToHistory(`üèÅ –†–∞—É–Ω–¥ ${this.round} –∑–∞–≤–µ—Ä—à–µ–Ω`);
                this.round++;
                this.cards = { melee: [], ranged: [], siege: [] };
                this.horn = { melee: false, ranged: false, siege: false };
                this.weather = { melee: false, ranged: false, siege: false };
                this.updateDisplay();
            }

            resetGame() {
                this.round = 1;
                this.cards = { melee: [], ranged: [], siege: [] };
                this.horn = { melee: false, ranged: false, siege: false };
                this.weather = { melee: false, ranged: false, siege: false };
                this.history = [];
                this.addToHistory('üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞');
                this.updateDisplay();
            }

            addToHistory(message) {
                const time = new Date().toLocaleTimeString().slice(0, 5);
                this.history.push(`${time}: ${message}`);
                if (this.history.length > 8) this.history.shift();

                const historyList = document.getElementById('historyList');
                historyList.innerHTML = this.history.map(msg =>
                    `<div class="history-item">${msg}</div>`
                ).join('');
            }
        }

        // –°–æ–∑–¥–∞–µ–º –∏–≥—Ä—É
        const game = new GwentMobileCounter();
        game.updateDisplay();

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function toggleAbility(type) { game.toggleAbility(type); }
        function addCard() { game.addCard(); }
        function removeCard(row, id) { game.removeCard(row, id); }
        function toggleCardDetails(id) { game.toggleCardDetails(id); }
        function toggleHorn(row) { game.toggleHorn(row); }
        function toggleWeather(row) { game.toggleWeather(row); }
        function endRound() { game.endRound(); }
        function resetGame() { game.resetGame(); }
    </script>
</body>
</html>
